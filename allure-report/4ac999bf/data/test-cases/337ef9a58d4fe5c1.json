{"uid":"337ef9a58d4fe5c1","name":"下达生产计划","fullName":"TestCase.integration_tests.test_mainprocess.TestMainProcess#test_29_issued_production_plan","historyId":"d45aa3914defebe4329edaa38d3e79d6","time":{"start":1751855164762,"stop":1751855164886,"duration":124},"description":"下达生产计划，期望下达成功","descriptionHtml":"<p>下达生产计划，期望下达成功</p>\n","status":"failed","statusMessage":"AssertionError: 期望Success=True，实际为False\nassert False == True","statusTrace":"self = <TestCase.integration_tests.test_mainprocess.TestMainProcess object at 0x0000026366B09950>\n\n    @allure.title(\"下达生产计划\")\n    @allure.description(\"下达生产计划，期望下达成功\")\n    def test_29_issued_production_plan(self):\n        with allure.step(\"调用接口下达生产计划\"):\n            assert TestMainProcess.production_plan_code and TestMainProcess.production_plan_id, \"缺少生产计划信息\"\n            assert TestMainProcess.BOMVersion, \"缺少BOM版本信息\"\n            BOMBasicCode = BOMCode + '_' + TestMainProcess.BOMVersion\n            issued_body = {\n                \"ProductionPlanCode\": TestMainProcess.production_plan_code,\n                \"MasterProductionPlanCode\": None,\n                \"ErpProductionPlanCode\": None,\n                \"ErpProductionPlanRowNo\": None,\n                \"ErpProductionPlanRowNoId\": 0,\n                \"SaleOrderCode\": None,\n                \"SaleOrderRowNo\": None,\n                \"RelationProductionCode\": None,\n                \"RelationProductionRowNo\": None,\n                \"CustomerCode\": None,\n                \"CustomerName\": None,\n                \"ProductionType\": \"Normal\",\n                \"PlanCategory\": None,\n                \"PlanScheduler\": None,\n                \"ProcessRoutingCode\": ProcessRoutingCode2,\n                \"ProcessRoutingName\": None,\n                \"ProductCode\": MaterialCode,\n                \"ProductName\": MaterialName,\n                \"ProductSpecification\": None,\n                \"BOMCode\": BOMCode,\n                \"BOMBasicCode\": BOMBasicCode,\n                \"ProductionPlanSource\": None,\n                \"PlanStartDate\": \"2025-06-24T00:00:00+08:00\",\n                \"PlanStartTime\": None,\n                \"PlanEndDate\": \"2025-08-31T00:00:00+08:00\",\n                \"PlanEndTime\": None,\n                \"ActualStartDate\": None,\n                \"ActualStartTime\": None,\n                \"ActualEndDate\": None,\n                \"ActualEndTime\": None,\n                \"PlanIssuedDate\": None,\n                \"PlanIssuedTime\": None,\n                \"PlanClosedDate\": None,\n                \"PlanClosedTime\": None,\n                \"PlanQty\": 100,\n                \"CompeletedQty\": 0,\n                \"UnCompeletedQty\": 100,\n                \"GoodQty\": 0,\n                \"BadQty\": 0,\n                \"ScrappedQty\": 0,\n                \"OneGoodQty\": 0,\n                \"OneBadQty\": 0,\n                \"OneScrappedQty\": 0,\n                \"ReworkGoodQty\": 0,\n                \"ReworkBadQty\": 0,\n                \"ReworkScrappedQty\": 0,\n                \"ActualInputQty\": 0,\n                \"ActualOutPutQty\": 0,\n                \"InWarehouseQty\": 0,\n                \"AcquireQty\": 0,\n                \"DifferQty\": 0,\n                \"OrderStatus\": \"WaitIssued\",\n                \"ControlStatus\": \"Enable\",\n                \"ControlReason\": None,\n                \"OrganizationStructureCode\": OrganizationStructureCode,\n                \"OrganizationStructureName\": OrganizationStructureName,\n                \"OrganizationStructureDisplayName\": None,\n                \"OrganizationStructureExternalCode\": None,\n                \"WorkShopInfoCode\": None,\n                \"WorkShopInfoName\": None,\n                \"ProductionLineCode\": None,\n                \"ProductionLineName\": None,\n                \"EquipmentCode\": None,\n                \"EquipmentName\": None,\n                \"EmergencySort\": 0,\n                \"MouldCode\": None,\n                \"MouldName\": None,\n                \"MouldSpecification\": None,\n                \"CreatorUserId\": 150,\n                \"CreatorUserName\": \"DemoAdmin\",\n                \"CreatorUserRealName\": \"DemoAdmin\",\n                \"CreationTime\": \"2025-06-28T09:58:59.143+08:00\",\n                \"LastModifierUserId\": 150,\n                \"LastModifierUserName\": \"DemoAdmin\",\n                \"LastModifierUserRealName\": \"DemoAdmin\",\n                \"LastModificationTime\": \"2025-06-28T09:58:59.187+08:00\",\n                \"CompanyCode\": \"00000\",\n                \"FactoryCode\": \"00000.00001\",\n                \"NeedUpdateFields\": {},\n                \"Id\": TestMainProcess.production_plan_id,\n                \"Remark\": \"\",\n                \"expand\": False,\n                \"index\": 1,\n                \"select\": True,\n                \"__edit\": True,\n                \"__edit_disable\": False,\n                \"__flushAnalysis\": False,\n                \"isEdit\": True\n            }\n            response = self.production_plan.issuedBatchProductionPlanOrderDatas([issued_body])\n        try:\n            assert response is not None, \"issuedBatchProductionPlanOrderDatas接口返回None\"\n            assert response.status_code == 200, f\"期望状态码200，实际为{response.status_code}\"\n            response_body = response.json()\n            assert response_body['Success'] == True, f\"期望Success=True，实际为{response_body['Success']}\"\n        except AssertionError as e:\n            self.logger.error(f\"下达生产计划失败：{e}\")\n>           raise e\n\nTestCase\\integration_tests\\test_mainprocess.py:708: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <TestCase.integration_tests.test_mainprocess.TestMainProcess object at 0x0000026366B09950>\n\n    @allure.title(\"下达生产计划\")\n    @allure.description(\"下达生产计划，期望下达成功\")\n    def test_29_issued_production_plan(self):\n        with allure.step(\"调用接口下达生产计划\"):\n            assert TestMainProcess.production_plan_code and TestMainProcess.production_plan_id, \"缺少生产计划信息\"\n            assert TestMainProcess.BOMVersion, \"缺少BOM版本信息\"\n            BOMBasicCode = BOMCode + '_' + TestMainProcess.BOMVersion\n            issued_body = {\n                \"ProductionPlanCode\": TestMainProcess.production_plan_code,\n                \"MasterProductionPlanCode\": None,\n                \"ErpProductionPlanCode\": None,\n                \"ErpProductionPlanRowNo\": None,\n                \"ErpProductionPlanRowNoId\": 0,\n                \"SaleOrderCode\": None,\n                \"SaleOrderRowNo\": None,\n                \"RelationProductionCode\": None,\n                \"RelationProductionRowNo\": None,\n                \"CustomerCode\": None,\n                \"CustomerName\": None,\n                \"ProductionType\": \"Normal\",\n                \"PlanCategory\": None,\n                \"PlanScheduler\": None,\n                \"ProcessRoutingCode\": ProcessRoutingCode2,\n                \"ProcessRoutingName\": None,\n                \"ProductCode\": MaterialCode,\n                \"ProductName\": MaterialName,\n                \"ProductSpecification\": None,\n                \"BOMCode\": BOMCode,\n                \"BOMBasicCode\": BOMBasicCode,\n                \"ProductionPlanSource\": None,\n                \"PlanStartDate\": \"2025-06-24T00:00:00+08:00\",\n                \"PlanStartTime\": None,\n                \"PlanEndDate\": \"2025-08-31T00:00:00+08:00\",\n                \"PlanEndTime\": None,\n                \"ActualStartDate\": None,\n                \"ActualStartTime\": None,\n                \"ActualEndDate\": None,\n                \"ActualEndTime\": None,\n                \"PlanIssuedDate\": None,\n                \"PlanIssuedTime\": None,\n                \"PlanClosedDate\": None,\n                \"PlanClosedTime\": None,\n                \"PlanQty\": 100,\n                \"CompeletedQty\": 0,\n                \"UnCompeletedQty\": 100,\n                \"GoodQty\": 0,\n                \"BadQty\": 0,\n                \"ScrappedQty\": 0,\n                \"OneGoodQty\": 0,\n                \"OneBadQty\": 0,\n                \"OneScrappedQty\": 0,\n                \"ReworkGoodQty\": 0,\n                \"ReworkBadQty\": 0,\n                \"ReworkScrappedQty\": 0,\n                \"ActualInputQty\": 0,\n                \"ActualOutPutQty\": 0,\n                \"InWarehouseQty\": 0,\n                \"AcquireQty\": 0,\n                \"DifferQty\": 0,\n                \"OrderStatus\": \"WaitIssued\",\n                \"ControlStatus\": \"Enable\",\n                \"ControlReason\": None,\n                \"OrganizationStructureCode\": OrganizationStructureCode,\n                \"OrganizationStructureName\": OrganizationStructureName,\n                \"OrganizationStructureDisplayName\": None,\n                \"OrganizationStructureExternalCode\": None,\n                \"WorkShopInfoCode\": None,\n                \"WorkShopInfoName\": None,\n                \"ProductionLineCode\": None,\n                \"ProductionLineName\": None,\n                \"EquipmentCode\": None,\n                \"EquipmentName\": None,\n                \"EmergencySort\": 0,\n                \"MouldCode\": None,\n                \"MouldName\": None,\n                \"MouldSpecification\": None,\n                \"CreatorUserId\": 150,\n                \"CreatorUserName\": \"DemoAdmin\",\n                \"CreatorUserRealName\": \"DemoAdmin\",\n                \"CreationTime\": \"2025-06-28T09:58:59.143+08:00\",\n                \"LastModifierUserId\": 150,\n                \"LastModifierUserName\": \"DemoAdmin\",\n                \"LastModifierUserRealName\": \"DemoAdmin\",\n                \"LastModificationTime\": \"2025-06-28T09:58:59.187+08:00\",\n                \"CompanyCode\": \"00000\",\n                \"FactoryCode\": \"00000.00001\",\n                \"NeedUpdateFields\": {},\n                \"Id\": TestMainProcess.production_plan_id,\n                \"Remark\": \"\",\n                \"expand\": False,\n                \"index\": 1,\n                \"select\": True,\n                \"__edit\": True,\n                \"__edit_disable\": False,\n                \"__flushAnalysis\": False,\n                \"isEdit\": True\n            }\n            response = self.production_plan.issuedBatchProductionPlanOrderDatas([issued_body])\n        try:\n            assert response is not None, \"issuedBatchProductionPlanOrderDatas接口返回None\"\n            assert response.status_code == 200, f\"期望状态码200，实际为{response.status_code}\"\n            response_body = response.json()\n>           assert response_body['Success'] == True, f\"期望Success=True，实际为{response_body['Success']}\"\nE           AssertionError: 期望Success=True，实际为False\nE           assert False == True\n\nTestCase\\integration_tests\\test_mainprocess.py:705: AssertionError","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[{"name":"setup_and_teardown","time":{"start":1751855052350,"stop":1751855136224,"duration":83874},"status":"passed","steps":[{"name":"前置条件：清理测试数据残留","time":{"start":1751855052350,"stop":1751855110202,"duration":57852},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":1,"hasContent":true}],"testStage":{"description":"下达生产计划，期望下达成功","status":"failed","statusMessage":"AssertionError: 期望Success=True，实际为False\nassert False == True","statusTrace":"self = <TestCase.integration_tests.test_mainprocess.TestMainProcess object at 0x0000026366B09950>\n\n    @allure.title(\"下达生产计划\")\n    @allure.description(\"下达生产计划，期望下达成功\")\n    def test_29_issued_production_plan(self):\n        with allure.step(\"调用接口下达生产计划\"):\n            assert TestMainProcess.production_plan_code and TestMainProcess.production_plan_id, \"缺少生产计划信息\"\n            assert TestMainProcess.BOMVersion, \"缺少BOM版本信息\"\n            BOMBasicCode = BOMCode + '_' + TestMainProcess.BOMVersion\n            issued_body = {\n                \"ProductionPlanCode\": TestMainProcess.production_plan_code,\n                \"MasterProductionPlanCode\": None,\n                \"ErpProductionPlanCode\": None,\n                \"ErpProductionPlanRowNo\": None,\n                \"ErpProductionPlanRowNoId\": 0,\n                \"SaleOrderCode\": None,\n                \"SaleOrderRowNo\": None,\n                \"RelationProductionCode\": None,\n                \"RelationProductionRowNo\": None,\n                \"CustomerCode\": None,\n                \"CustomerName\": None,\n                \"ProductionType\": \"Normal\",\n                \"PlanCategory\": None,\n                \"PlanScheduler\": None,\n                \"ProcessRoutingCode\": ProcessRoutingCode2,\n                \"ProcessRoutingName\": None,\n                \"ProductCode\": MaterialCode,\n                \"ProductName\": MaterialName,\n                \"ProductSpecification\": None,\n                \"BOMCode\": BOMCode,\n                \"BOMBasicCode\": BOMBasicCode,\n                \"ProductionPlanSource\": None,\n                \"PlanStartDate\": \"2025-06-24T00:00:00+08:00\",\n                \"PlanStartTime\": None,\n                \"PlanEndDate\": \"2025-08-31T00:00:00+08:00\",\n                \"PlanEndTime\": None,\n                \"ActualStartDate\": None,\n                \"ActualStartTime\": None,\n                \"ActualEndDate\": None,\n                \"ActualEndTime\": None,\n                \"PlanIssuedDate\": None,\n                \"PlanIssuedTime\": None,\n                \"PlanClosedDate\": None,\n                \"PlanClosedTime\": None,\n                \"PlanQty\": 100,\n                \"CompeletedQty\": 0,\n                \"UnCompeletedQty\": 100,\n                \"GoodQty\": 0,\n                \"BadQty\": 0,\n                \"ScrappedQty\": 0,\n                \"OneGoodQty\": 0,\n                \"OneBadQty\": 0,\n                \"OneScrappedQty\": 0,\n                \"ReworkGoodQty\": 0,\n                \"ReworkBadQty\": 0,\n                \"ReworkScrappedQty\": 0,\n                \"ActualInputQty\": 0,\n                \"ActualOutPutQty\": 0,\n                \"InWarehouseQty\": 0,\n                \"AcquireQty\": 0,\n                \"DifferQty\": 0,\n                \"OrderStatus\": \"WaitIssued\",\n                \"ControlStatus\": \"Enable\",\n                \"ControlReason\": None,\n                \"OrganizationStructureCode\": OrganizationStructureCode,\n                \"OrganizationStructureName\": OrganizationStructureName,\n                \"OrganizationStructureDisplayName\": None,\n                \"OrganizationStructureExternalCode\": None,\n                \"WorkShopInfoCode\": None,\n                \"WorkShopInfoName\": None,\n                \"ProductionLineCode\": None,\n                \"ProductionLineName\": None,\n                \"EquipmentCode\": None,\n                \"EquipmentName\": None,\n                \"EmergencySort\": 0,\n                \"MouldCode\": None,\n                \"MouldName\": None,\n                \"MouldSpecification\": None,\n                \"CreatorUserId\": 150,\n                \"CreatorUserName\": \"DemoAdmin\",\n                \"CreatorUserRealName\": \"DemoAdmin\",\n                \"CreationTime\": \"2025-06-28T09:58:59.143+08:00\",\n                \"LastModifierUserId\": 150,\n                \"LastModifierUserName\": \"DemoAdmin\",\n                \"LastModifierUserRealName\": \"DemoAdmin\",\n                \"LastModificationTime\": \"2025-06-28T09:58:59.187+08:00\",\n                \"CompanyCode\": \"00000\",\n                \"FactoryCode\": \"00000.00001\",\n                \"NeedUpdateFields\": {},\n                \"Id\": TestMainProcess.production_plan_id,\n                \"Remark\": \"\",\n                \"expand\": False,\n                \"index\": 1,\n                \"select\": True,\n                \"__edit\": True,\n                \"__edit_disable\": False,\n                \"__flushAnalysis\": False,\n                \"isEdit\": True\n            }\n            response = self.production_plan.issuedBatchProductionPlanOrderDatas([issued_body])\n        try:\n            assert response is not None, \"issuedBatchProductionPlanOrderDatas接口返回None\"\n            assert response.status_code == 200, f\"期望状态码200，实际为{response.status_code}\"\n            response_body = response.json()\n            assert response_body['Success'] == True, f\"期望Success=True，实际为{response_body['Success']}\"\n        except AssertionError as e:\n            self.logger.error(f\"下达生产计划失败：{e}\")\n>           raise e\n\nTestCase\\integration_tests\\test_mainprocess.py:708: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <TestCase.integration_tests.test_mainprocess.TestMainProcess object at 0x0000026366B09950>\n\n    @allure.title(\"下达生产计划\")\n    @allure.description(\"下达生产计划，期望下达成功\")\n    def test_29_issued_production_plan(self):\n        with allure.step(\"调用接口下达生产计划\"):\n            assert TestMainProcess.production_plan_code and TestMainProcess.production_plan_id, \"缺少生产计划信息\"\n            assert TestMainProcess.BOMVersion, \"缺少BOM版本信息\"\n            BOMBasicCode = BOMCode + '_' + TestMainProcess.BOMVersion\n            issued_body = {\n                \"ProductionPlanCode\": TestMainProcess.production_plan_code,\n                \"MasterProductionPlanCode\": None,\n                \"ErpProductionPlanCode\": None,\n                \"ErpProductionPlanRowNo\": None,\n                \"ErpProductionPlanRowNoId\": 0,\n                \"SaleOrderCode\": None,\n                \"SaleOrderRowNo\": None,\n                \"RelationProductionCode\": None,\n                \"RelationProductionRowNo\": None,\n                \"CustomerCode\": None,\n                \"CustomerName\": None,\n                \"ProductionType\": \"Normal\",\n                \"PlanCategory\": None,\n                \"PlanScheduler\": None,\n                \"ProcessRoutingCode\": ProcessRoutingCode2,\n                \"ProcessRoutingName\": None,\n                \"ProductCode\": MaterialCode,\n                \"ProductName\": MaterialName,\n                \"ProductSpecification\": None,\n                \"BOMCode\": BOMCode,\n                \"BOMBasicCode\": BOMBasicCode,\n                \"ProductionPlanSource\": None,\n                \"PlanStartDate\": \"2025-06-24T00:00:00+08:00\",\n                \"PlanStartTime\": None,\n                \"PlanEndDate\": \"2025-08-31T00:00:00+08:00\",\n                \"PlanEndTime\": None,\n                \"ActualStartDate\": None,\n                \"ActualStartTime\": None,\n                \"ActualEndDate\": None,\n                \"ActualEndTime\": None,\n                \"PlanIssuedDate\": None,\n                \"PlanIssuedTime\": None,\n                \"PlanClosedDate\": None,\n                \"PlanClosedTime\": None,\n                \"PlanQty\": 100,\n                \"CompeletedQty\": 0,\n                \"UnCompeletedQty\": 100,\n                \"GoodQty\": 0,\n                \"BadQty\": 0,\n                \"ScrappedQty\": 0,\n                \"OneGoodQty\": 0,\n                \"OneBadQty\": 0,\n                \"OneScrappedQty\": 0,\n                \"ReworkGoodQty\": 0,\n                \"ReworkBadQty\": 0,\n                \"ReworkScrappedQty\": 0,\n                \"ActualInputQty\": 0,\n                \"ActualOutPutQty\": 0,\n                \"InWarehouseQty\": 0,\n                \"AcquireQty\": 0,\n                \"DifferQty\": 0,\n                \"OrderStatus\": \"WaitIssued\",\n                \"ControlStatus\": \"Enable\",\n                \"ControlReason\": None,\n                \"OrganizationStructureCode\": OrganizationStructureCode,\n                \"OrganizationStructureName\": OrganizationStructureName,\n                \"OrganizationStructureDisplayName\": None,\n                \"OrganizationStructureExternalCode\": None,\n                \"WorkShopInfoCode\": None,\n                \"WorkShopInfoName\": None,\n                \"ProductionLineCode\": None,\n                \"ProductionLineName\": None,\n                \"EquipmentCode\": None,\n                \"EquipmentName\": None,\n                \"EmergencySort\": 0,\n                \"MouldCode\": None,\n                \"MouldName\": None,\n                \"MouldSpecification\": None,\n                \"CreatorUserId\": 150,\n                \"CreatorUserName\": \"DemoAdmin\",\n                \"CreatorUserRealName\": \"DemoAdmin\",\n                \"CreationTime\": \"2025-06-28T09:58:59.143+08:00\",\n                \"LastModifierUserId\": 150,\n                \"LastModifierUserName\": \"DemoAdmin\",\n                \"LastModifierUserRealName\": \"DemoAdmin\",\n                \"LastModificationTime\": \"2025-06-28T09:58:59.187+08:00\",\n                \"CompanyCode\": \"00000\",\n                \"FactoryCode\": \"00000.00001\",\n                \"NeedUpdateFields\": {},\n                \"Id\": TestMainProcess.production_plan_id,\n                \"Remark\": \"\",\n                \"expand\": False,\n                \"index\": 1,\n                \"select\": True,\n                \"__edit\": True,\n                \"__edit_disable\": False,\n                \"__flushAnalysis\": False,\n                \"isEdit\": True\n            }\n            response = self.production_plan.issuedBatchProductionPlanOrderDatas([issued_body])\n        try:\n            assert response is not None, \"issuedBatchProductionPlanOrderDatas接口返回None\"\n            assert response.status_code == 200, f\"期望状态码200，实际为{response.status_code}\"\n            response_body = response.json()\n>           assert response_body['Success'] == True, f\"期望Success=True，实际为{response_body['Success']}\"\nE           AssertionError: 期望Success=True，实际为False\nE           assert False == True\n\nTestCase\\integration_tests\\test_mainprocess.py:705: AssertionError","steps":[{"name":"调用接口下达生产计划","time":{"start":1751855164762,"stop":1751855164886,"duration":124},"status":"passed","steps":[],"attachments":[],"parameters":[],"attachmentsCount":0,"shouldDisplayMessage":false,"attachmentStep":false,"stepsCount":0,"hasContent":false}],"attachments":[{"uid":"9eee990603a5fbc6","name":"log","source":"9eee990603a5fbc6.txt","type":"text/plain","size":2687},{"uid":"9748f35864ab3bf5","name":"stderr","source":"9748f35864ab3bf5.txt","type":"text/plain","size":18257}],"parameters":[],"attachmentsCount":2,"shouldDisplayMessage":true,"attachmentStep":false,"stepsCount":1,"hasContent":true},"afterStages":[],"labels":[{"name":"feature","value":"主流程集成测试"},{"name":"parentSuite","value":"TestCase.integration_tests"},{"name":"suite","value":"test_mainprocess"},{"name":"subSuite","value":"TestMainProcess"},{"name":"host","value":"DESKTOP-520CACV"},{"name":"thread","value":"15080-MainThread"},{"name":"framework","value":"pytest"},{"name":"language","value":"cpython3"},{"name":"package","value":"TestCase.integration_tests.test_mainprocess"},{"name":"resultFormat","value":"allure2"}],"parameters":[],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[]}],"tags":[]},"source":"337ef9a58d4fe5c1.json","parameterValues":[]}